#-------------------------------------------------------------------------------
#
#-------------------------------------------------------------------------------

PROGS = libabmd.so main 

all: $(PROGS)

CC = LANG=C gcc -std=c99 -g  

#-------------------------------------------------------------------------------

main: main.c T/plot.o 
	$(CC) -o $@ $^  -lm -I.. -L.  -labmd


T/plot.o: plot.c plot.h
	$(CC) -c -o $@ $<

#-------------------------------------------------------------------------------

libabmd.so: T/l_abmd.o T/l_api.o T/l_queue.o T/l_rk.o 
	gcc  -shared -o $@ $^ 



T/l_abmd.o: l_abmd.c   l_abmd.h l_rk.h l_queue.h l_abmd_internal.h
	$(CC) -c -o $@ $<  -I. 

T/l_api.o: l_api.c   l_abmd.h l_abmd_internal.h
	$(CC) -c -o $@ $<  -I.

T/l_queue.o: l_queue.c   l_queue.h l_abmd_internal.h
	$(CC) -c -o $@ $<  -I.

T/l_rk.o: l_rk.c   l_abmd.h l_rk.h l_abmd_internal.h
	$(CC) -c -o $@ $<  -I.

#-------------------------------------------------------------------------------

clean:
	rm -f *.o T/*.o $(PROGS) 

#-------------------------------------------------------------------------------
#
#-------------------------------------------------------------------------------
